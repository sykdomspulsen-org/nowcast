<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Simulate registration date for daily death event, with a prespecified reporting
  delay pattern.
For now the reporting delay follows a negative binomial distribution."><title>Simulate registration date for death event — simulate_registration • nowcast</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate registration date for death event — simulate_registration"><meta property="og:description" content="Simulate registration date for daily death event, with a prespecified reporting
  delay pattern.
For now the reporting delay follows a negative binomial distribution."><meta property="og:image" content="https://docs.sykdomspulsen.no/nowcast/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nowcast</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2022.4.18</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/aggregation_and_delays.html">Data aggregation and reporting delays</a>
    <a class="dropdown-item" href="../articles/introduction.html">Introduction to nowcast</a>
    <a class="dropdown-item" href="../articles/simulate_mortality_data.html">Simulating mortality data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sykdomspulsen-org/nowcast/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simulate registration date for death event</h1>
      <small class="dont-index">Source: <a href="https://github.com/sykdomspulsen-org/nowcast/blob/HEAD/R/1_simulate_data_mortality.R" class="external-link"><code>R/1_simulate_data_mortality.R</code></a></small>
      <div class="d-none name"><code>simulate_registration.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Simulate registration date for daily death event, with a prespecified reporting
  delay pattern.</p>
<p>For now the reporting delay follows a negative binomial distribution.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">simulate_registration</span><span class="op">(</span><span class="va">death_data</span>, r <span class="op">=</span> <span class="cn">NULL</span>, p <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>death_data</dt>
<dd><p>A simulated data object from <code><a href="simulate_daily_death_event.html">simulate_daily_death_event()</a></code>.</p></dd>
<dt>r, p</dt>
<dd><p>Parameters for negative binomial distribution. Used jointly to control
  the mean and variance of the registration delay in terms of days. See detail.</p>
<p>By default, <code>r = 10, p = 0.5</code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data.table containing</p><dl><dt>id</dt>
<dd><p>Pseudo ID for death events.</p></dd>

  <dt>date</dt>
<dd><p>Date of the death event when it took place (DOE).</p></dd>

  <dt>delay_days</dt>
<dd><p>Delay in days.</p></dd>

  <dt>date_reg</dt>
<dd><p>Date of registration (DOR).</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The input data should contain daily individual level death event with date of event.
  The number of days for registration (or reporting) delay is then simulated based
  on the negative binomial distribution with parameters (r, p).</p>
<p>This choice is made by investigating the delay pattern in the real data, which is
  often right skewed and has a long tail. NB model is preferable compared to
  Poisson model for its flexibility in capturing the over-dispersion.</p>
<p>This parametrisation is consistent with <code>stats::rnbinom(n, size = r, prob = p)</code>.</p>
<p>The expected days of delay is then r(1-p)/p. The variance is r(1-p)/p^2.</p>
<p>Plausible values are <code>r = 10</code> and <code>0.5 &lt;= p &lt;= 0.9</code>, as it is common to
  to observe an average delay between 1 to 10 days. However users should adjust
  the parameters to examine different delay patterns.</p>
    </div>
    <div class="section level2">
    <h2 id="future-implementations">Future implementations<a class="anchor" aria-label="anchor" href="#future-implementations"></a></h2>
    

<p>It is possible to include heavy-tailed distributions.</p>
<p>It might be realistic to adjust the delay with varying temporal effect (e.g. weekend).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">start_date</span> <span class="op">&lt;-</span> <span class="st">'2018-01-01'</span></span>
<span class="r-in"><span class="va">end_date</span> <span class="op">&lt;-</span> <span class="st">'2019-12-31'</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># simulate death data using the poisson model, with mean daily death 25</span></span>
<span class="r-in"><span class="va">death_event</span> <span class="op">&lt;-</span> <span class="fu"><a href="simulate_daily_death_event.html">simulate_daily_death_event</a></span><span class="op">(</span></span>
<span class="r-in">  start_date <span class="op">=</span> <span class="va">start_date</span>,</span>
<span class="r-in">  end_date <span class="op">=</span> <span class="va">end_date</span>,</span>
<span class="r-in">  model <span class="op">=</span> <span class="st">'poisson'</span>,</span>
<span class="r-in">  param_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lambda <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># simulate delay, with expected delay of 10 days (default)</span></span>
<span class="r-in"><span class="va">death_event_register</span> <span class="op">&lt;-</span> <span class="fu">simulate_registration</span><span class="op">(</span>death_data <span class="op">=</span> <span class="va">death_event</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># different parameters</span></span>
<span class="r-in"><span class="va">death_event_register</span> <span class="op">&lt;-</span> <span class="fu">simulate_registration</span><span class="op">(</span>death_data <span class="op">=</span> <span class="va">death_event</span>, r <span class="op">=</span> <span class="fl">10</span>, p <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Crafted by Chi Zhang, Richard Aubrey White, Aurora Christine Hofman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer></div>

  

  

  </body></html>

